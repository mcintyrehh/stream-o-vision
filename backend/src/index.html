<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Streaming With Node</title>
  </head>
  <body></body>
  <!-- <script src="../dist/frontend/main.js" type="text/javascript"></script> -->
  <script>
    const wrapper = document.createElement("div");
    const video = document.createElement("video");
    video.id = "videpPlayer";
    video.controls = true;
    video.autoplay = true;
    video.muted = true;

    wrapper.appendChild(video);

    // creating info divs below the video
    const videoInfo = document.createElement("div");
    const channelNumber = document.createElement("span");
    channelNumber.className = "channel-div";
    channelNumber.innerHTML = `Channel 1`;

    videoInfo.appendChild(channelNumber);
    const videoName = document.createElement("span");

    videoName.innerHTML = ` - Empire State Building`;
    videoInfo.appendChild(videoName);
    wrapper.appendChild(videoInfo);

    const proxy_url = "http://127.0.0.1:8181";
    const video_url =
      "https://videos3.earthcam.com/fecnetwork/20489.flv/playlist.m3u8";
    const referer_url = "https://www.earthcam.com/";
    const file_extension = ".m3u8";

    const hls_proxy_url = `${proxy_url}/${btoa(
      `${video_url}|${referer_url}`,
    )}${file_extension}`;
    const source = document.createElement("source");
    source.src = hls_proxy_url;
    source.type = "application/x-mpegURL";

    video.appendChild(source);
    console.log("hls_proxy_url: ", hls_proxy_url);

    const body = document.getElementsByTagName("body")[0];
    body.appendChild(wrapper);
  </script>
</html>
